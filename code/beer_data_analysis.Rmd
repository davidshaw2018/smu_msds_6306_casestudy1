---
title: "beer_data_analysis"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Analysis of Budweiser Beer and Brewery Data

## Introduction

We want to analyze the distribution of manufacturing centers of Budweiser beer around the US, and additionally track features and attributes of the different beers produced. 

```{r, echo=T}
library(data.table)
library(ggplot2)

beers <- fread('~/smu_msds_6306_casestudy1/data/Beers.csv')
breweries <- fread('~/smu_msds_6306_casestudy1/data/Breweries.csv')

```

Breweries by state

```{r, echo=T}
plot(
  ggplot(data=breweries, aes(x=State)) +
    geom_bar() +
    theme_bw() +
    theme(axis.text.x = element_text(angle=90, hjust=1)) +
    ggtitle("Breweries by State") 
)


```

It's clear California, Michigan, and Colorado are the most concentrated breweries. 

```{r, echo=T}
# merge
master <- merge(beers, breweries, by.x='Brewery_id', by.y='Brew_ID')
setnames(master, c('Name.x', 'Name.y'), c('Beer_name', 'brewery'))


```


Look at descriptive statistics

```{r, echo=T}
meds <- master[, list(med_alc = median(ABV, na.rm=T), med_bit = median(IBU, na.rm=T)), by='State']

nas <- lapply(names(master), function(x) {
  test <- unlist(master[, get(x)])
  test <- test[is.na(test)]
  return(length(test))
})

na_df <- data.table(
  col = names(master), 
  nas = nas
)

```
